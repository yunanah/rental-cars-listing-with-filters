{"ast":null,"code":"var _jsxFileName = \"/Users/yoorabaek/Desktop/rental-cars/src/CarList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAlignJustify, faSortDown, faTimes, faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport { faSquare } from \"@fortawesome/free-regular-svg-icons\";\nimport Detail from \"./components/Detail\"; //차량 리스트 페이지 컴포넌트\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction CarList() {\n  _s();\n\n  let [loading, setLoading] = useState(true); // 페이지 로딩 state\n\n  let [stock, setStock] = useState(true); // 재고 여부 state\n\n  let [cars, setCars] = useState([]); // 페이지에 보여줄 차량 데이터 배열 state\n\n  let [detail, setDetail] = useState(false); // 상세 모달창 state\n\n  let [carInfo, setCarInfo] = useState(null); // 선택한 차량 (상세페이지에 정보 불러올 차량 Id)\n\n  let [morePress, setMorePress] = useState(0); // 더보기 버튼 누른 횟수 count\n\n  let [more, setMore] = useState(true); // 더보기 버튼 보여주기 state - 더보여줄 차량이 없으면 false\n\n  let [scroll, setScroll] = useState(0); // 스크롤 y축 정보 state\n\n  let [viewMany, setViewMany] = useState(false); // 한번에 많이 보기 설정 state\n\n  let [filter, setFilter] = useState(0); // 정렬 기준 - 0:가격 내림차순, 1:가격 오름차순, 2:인기순, 3:할인율순\n\n  let [sizes, setSizes] = useState([true, true, true, true, true]); // 필터 선택된 차량 종류\n\n  let [regions, setRegions] = useState([true, true, true, true, true]); // 필터 선택된 지역들\n\n  const carSizes = [\"경형/소형\", \"준중형\", \"중형/대형\", \"SUV\", \"수입\"];\n  const carRegions = [\"광주\", \"대전\", \"대구/경북\", \"부산/창원\", \"서울/경기/인천\"]; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useEffect(async () => {\n    await axios.get(\"http://localhost:8080/carClasses\").then(result => {\n      let timer = setTimeout(() => {\n        setLoading(false);\n      }, 2000); // 데이터 로딩 종료\n      // 더보기 버튼, 재고 상태 초기화\n\n      setMore(true);\n      setStock(true); // console.log(result.data)\n      // 사이즈 및 지역 선택사항 필터링\n\n      let cloneData = [...result.data]; // 원본데이터를 복제한 데이터\n\n      let selectedSizes = []; // 필터에서 선택된 차종만 저장될 배열\n\n      let selectedRegions = []; // 필터에서 선택된 지역만 저장될 배열\n      // sizes와 regions state에서 필터된 것들만 저장\n\n      sizes.forEach((a, i) => {\n        if (a) return selectedSizes.push(carSizes[i]);\n      });\n      regions.forEach((a, i) => {\n        if (a) return selectedRegions.push(carRegions[i]);\n      }); // console.log(selectedSizes, selectedRegions)\n      // 차들 중에서 필터에 맞는 차만 걸러내 저장\n\n      cloneData = cloneData.filter(a => {\n        if (selectedSizes.includes(a.carModel)) {\n          for (let reg of selectedRegions) {\n            if (a.regionGroups.includes(reg)) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      }); // 필터링 후 길이를 통해 더보기 버튼, 재고 여부 state 변경\n\n      if (cloneData.length < (morePress + 1) * 5) {\n        // 차량 데이터 크기에 따라 0-재고없음 , 더보기버튼 보이는지 여부 처리\n        setMore(false);\n      }\n\n      if (cloneData.length === 0) {\n        setStock(false);\n      } // filter에 따라 정렬 : 0-낮은가격순 , 1-높은가격순, 2-인기순, 3-할인율순\n\n\n      if (filter == 0) {\n        cloneData.sort((a, b) => {\n          return a.price - b.price;\n        });\n      } else if (filter == 1) {\n        cloneData.sort((a, b) => {\n          return b.price - a.price;\n        });\n      } else if (filter == 2) {\n        // 따로 수치가 없고 인기 태그 여부로 배치했습니다\n        let tempArr = [];\n        result.data.map((a, i) => {\n          if (a.carTypeTags.includes(\"인기\")) {\n            tempArr.push(a);\n          }\n        });\n        result.data.map((a, i) => {\n          if (!a.carTypeTags.includes(\"인기\")) {\n            tempArr.push(a);\n          }\n        });\n        cloneData = tempArr;\n      } else if (filter == 3) {\n        cloneData.sort((a, b) => {\n          return b.discountPercent - a.discountPercent;\n        });\n      } // 더보기 버튼 클릭 횟수에 맞게 차량 개수 설정\n\n\n      setCars(cloneData.slice(0, 5 * (morePress + 1))); // 이전에 확인한 스크롤로 이동\n\n      window.scrollTo(0, scroll); // console.log('cars',cars)\n\n      return () => {\n        clearTimeout(timer);\n      };\n    }).catch(err => console.log(\"에러\", err));\n  }, [morePress, detail, filter, sizes, regions]); // 더보기 버튼을 누르거나 상세 모달창 열고 닫을 때마다 실행됨\n  // 정렬 방식 select 선택 이벤트 값 state에 저장\n\n  const handleSelect = e => {\n    setFilter(e.target.value);\n    console.log(e.target.value);\n  }; //render\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `body ${detail ? \"dimmed\" : \"\"}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-view\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            className: \"go-back\",\n            icon: faArrowLeft\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uCD94\\uCC9C \\uCC28\\uB7C9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"select-group is-active\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              onChange: handleSelect,\n              value: filter,\n              className: \"form-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"0\",\n                children: \"\\uB0AE\\uC740\\uAC00\\uACA9\\uC21C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"\\uB192\\uC740\\uAC00\\uACA9\\uC21C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"\\uC778\\uAE30\\uC21C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"\\uD560\\uC778\\uC728\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              className: \"select-icon\",\n              icon: faSortDown\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"show-version-btn\",\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              onClick: () => {\n                setViewMany(!viewMany);\n              },\n              className: \"icon-btn\",\n              icon: viewMany ? faAlignJustify : faSquare\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"types\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"size-filters\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"\\uCC28\\uC885\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"items\",\n              children: carSizes.map((a, i) => {\n                return /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `item ${sizes[i] ? \"selected\" : \"\"}`,\n                  onClick: () => {\n                    let cloneSizes = [...sizes];\n                    cloneSizes[i] = !cloneSizes[i];\n                    setScroll(0);\n                    setSizes(cloneSizes);\n                  },\n                  children: a\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"region-filters\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"\\uC9C0\\uC5ED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"items\",\n              children: carRegions.map((a, i) => {\n                return /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `item ${regions[i] ? \"selected\" : \"\"}`,\n                  onClick: () => {\n                    let cloneRegions = [...regions];\n                    cloneRegions[i] = !cloneRegions[i];\n                    setScroll(0);\n                    setRegions(cloneRegions);\n                  },\n                  children: a\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), loading === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"\\uB85C\\uB529 \\uC911...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this) : !stock ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-stock\",\n        children: \"\\uCC28\\uB7C9 \\uC5C6\\uC74C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [// render 차량 Card 컴포넌트\n        cars.map((a, i) => {\n          return /*#__PURE__*/_jsxDEV(Card, {\n            className: \"card\",\n            viewMany: viewMany,\n            setScroll: setScroll,\n            setCarInfo: setCarInfo,\n            setDetail: setDetail,\n            car: cars[i]\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 19\n          }, this);\n        }), // 더보기 버튼\n        more ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"more\",\n          onClick: () => {\n            setMorePress(morePress++);\n            setScroll(window.scrollY + 100);\n            let newCars = [...cars];\n            newCars.push();\n          },\n          children: \"\\uB354\\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 17\n        }, this) : null, // 상세정보 모달창\n        detail ? /*#__PURE__*/_jsxDEV(Detail, {\n          setDetail: setDetail,\n          carInfo: carInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 24\n        }, this) : null]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CarList, \"aZzC6hykN71QOYGzGn5xpzPx8NA=\");\n\n_c = CarList;\nexport default CarList;\n\nvar _c;\n\n$RefreshReg$(_c, \"CarList\");","map":{"version":3,"sources":["/Users/yoorabaek/Desktop/rental-cars/src/CarList.js"],"names":["React","useEffect","useState","Link","axios","FontAwesomeIcon","faAlignJustify","faSortDown","faTimes","faArrowLeft","faSquare","Detail","CarList","loading","setLoading","stock","setStock","cars","setCars","detail","setDetail","carInfo","setCarInfo","morePress","setMorePress","more","setMore","scroll","setScroll","viewMany","setViewMany","filter","setFilter","sizes","setSizes","regions","setRegions","carSizes","carRegions","get","then","result","timer","setTimeout","cloneData","data","selectedSizes","selectedRegions","forEach","a","i","push","includes","carModel","reg","regionGroups","length","sort","b","price","tempArr","map","carTypeTags","discountPercent","slice","window","scrollTo","clearTimeout","catch","err","console","log","handleSelect","e","target","value","cloneSizes","cloneRegions","scrollY","newCars"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faAlignJustify,\n  faSortDown,\n  faTimes,\n  faArrowLeft,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { faSquare } from \"@fortawesome/free-regular-svg-icons\";\n\nimport Detail from \"./components/Detail\";\n\n//차량 리스트 페이지 컴포넌트\nfunction CarList() {\n  let [loading, setLoading] = useState(true); // 페이지 로딩 state\n  let [stock, setStock] = useState(true); // 재고 여부 state\n  let [cars, setCars] = useState([]); // 페이지에 보여줄 차량 데이터 배열 state\n  let [detail, setDetail] = useState(false); // 상세 모달창 state\n  let [carInfo, setCarInfo] = useState(null); // 선택한 차량 (상세페이지에 정보 불러올 차량 Id)\n  let [morePress, setMorePress] = useState(0); // 더보기 버튼 누른 횟수 count\n  let [more, setMore] = useState(true); // 더보기 버튼 보여주기 state - 더보여줄 차량이 없으면 false\n  let [scroll, setScroll] = useState(0); // 스크롤 y축 정보 state\n  let [viewMany, setViewMany] = useState(false); // 한번에 많이 보기 설정 state\n  let [filter, setFilter] = useState(0); // 정렬 기준 - 0:가격 내림차순, 1:가격 오름차순, 2:인기순, 3:할인율순\n\n  let [sizes, setSizes] = useState([true, true, true, true, true]); // 필터 선택된 차량 종류\n  let [regions, setRegions] = useState([true, true, true, true, true]); // 필터 선택된 지역들\n\n  const carSizes = [\"경형/소형\", \"준중형\", \"중형/대형\", \"SUV\", \"수입\"];\n  const carRegions = [\n    \"광주\",\n    \"대전\",\n    \"대구/경북\",\n    \"부산/창원\",\n    \"서울/경기/인천\",\n  ];\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(async () => {\n    await axios\n      .get(\"http://localhost:8080/carClasses\")\n      .then((result) => {\n        let timer = setTimeout(() => {\n          setLoading(false);\n        }, 2000); // 데이터 로딩 종료\n        // 더보기 버튼, 재고 상태 초기화\n        setMore(true);\n        setStock(true);\n\n        // console.log(result.data)\n\n        // 사이즈 및 지역 선택사항 필터링\n        let cloneData = [...result.data]; // 원본데이터를 복제한 데이터\n        let selectedSizes = []; // 필터에서 선택된 차종만 저장될 배열\n        let selectedRegions = []; // 필터에서 선택된 지역만 저장될 배열\n\n        // sizes와 regions state에서 필터된 것들만 저장\n        sizes.forEach((a, i) => {\n          if (a) return selectedSizes.push(carSizes[i]);\n        });\n        regions.forEach((a, i) => {\n          if (a) return selectedRegions.push(carRegions[i]);\n        });\n        // console.log(selectedSizes, selectedRegions)\n\n        // 차들 중에서 필터에 맞는 차만 걸러내 저장\n        cloneData = cloneData.filter((a) => {\n          if (selectedSizes.includes(a.carModel)) {\n            for (let reg of selectedRegions) {\n              if (a.regionGroups.includes(reg)) {\n                return true;\n              }\n            }\n          }\n          return false;\n        });\n\n        // 필터링 후 길이를 통해 더보기 버튼, 재고 여부 state 변경\n        if (cloneData.length < (morePress + 1) * 5) {\n          // 차량 데이터 크기에 따라 0-재고없음 , 더보기버튼 보이는지 여부 처리\n          setMore(false);\n        }\n        if (cloneData.length === 0) {\n          setStock(false);\n        }\n\n        // filter에 따라 정렬 : 0-낮은가격순 , 1-높은가격순, 2-인기순, 3-할인율순\n        if (filter == 0) {\n          cloneData.sort((a, b) => {\n            return a.price - b.price;\n          });\n        } else if (filter == 1) {\n          cloneData.sort((a, b) => {\n            return b.price - a.price;\n          });\n        } else if (filter == 2) {\n          // 따로 수치가 없고 인기 태그 여부로 배치했습니다\n          let tempArr = [];\n\n          result.data.map((a, i) => {\n            if (a.carTypeTags.includes(\"인기\")) {\n              tempArr.push(a);\n            }\n          });\n          result.data.map((a, i) => {\n            if (!a.carTypeTags.includes(\"인기\")) {\n              tempArr.push(a);\n            }\n          });\n\n          cloneData = tempArr;\n        } else if (filter == 3) {\n          cloneData.sort((a, b) => {\n            return b.discountPercent - a.discountPercent;\n          });\n        }\n\n        // 더보기 버튼 클릭 횟수에 맞게 차량 개수 설정\n        setCars(cloneData.slice(0, 5 * (morePress + 1)));\n        // 이전에 확인한 스크롤로 이동\n        window.scrollTo(0, scroll);\n        // console.log('cars',cars)\n\n        return () => {\n          clearTimeout(timer);\n        };\n      })\n      .catch((err) => console.log(\"에러\", err));\n  }, [morePress, detail, filter, sizes, regions]); // 더보기 버튼을 누르거나 상세 모달창 열고 닫을 때마다 실행됨\n\n  // 정렬 방식 select 선택 이벤트 값 state에 저장\n  const handleSelect = (e) => {\n    setFilter(e.target.value);\n    console.log(e.target.value);\n  };\n\n  //render\n  return (\n    <div className={`body ${detail ? \"dimmed\" : \"\"}`}>\n      <div className=\"list-view\">\n        <div className=\"header\">\n          <Link to=\"/\">\n            <FontAwesomeIcon className=\"go-back\" icon={faArrowLeft} />\n          </Link>\n          <h2>추천 차량</h2>\n          <div className=\"buttons\">\n            <div className=\"select-group is-active\">\n              <select\n                onChange={handleSelect}\n                value={filter}\n                className=\"form-select\"\n              >\n                <option value=\"0\">낮은가격순</option>\n                <option value=\"1\">높은가격순</option>\n                <option value=\"2\">인기순</option>\n                <option value=\"3\">할인율</option>\n              </select>\n              <FontAwesomeIcon className=\"select-icon\" icon={faSortDown} />\n            </div>\n            <div className=\"show-version-btn\">\n              <FontAwesomeIcon\n                onClick={() => {\n                  setViewMany(!viewMany);\n                }}\n                className=\"icon-btn\"\n                icon={viewMany ? faAlignJustify : faSquare}\n              />\n            </div>\n          </div>\n          <div className=\"types\">\n            <div className=\"size-filters\">\n              <h4>차종</h4>\n              <div className=\"items\">\n                {carSizes.map((a, i) => {\n                  return (\n                    <span\n                      className={`item ${sizes[i] ? \"selected\" : \"\"}`}\n                      onClick={() => {\n                        let cloneSizes = [...sizes];\n                        cloneSizes[i] = !cloneSizes[i];\n                        setScroll(0);\n                        setSizes(cloneSizes);\n                      }}\n                    >\n                      {a}\n                    </span>\n                  );\n                })}\n              </div>\n            </div>\n            <div className=\"region-filters\">\n              <h4>지역</h4>\n              <div className=\"items\">\n                {carRegions.map((a, i) => {\n                  return (\n                    <span\n                      className={`item ${regions[i] ? \"selected\" : \"\"}`}\n                      onClick={() => {\n                        let cloneRegions = [...regions];\n                        cloneRegions[i] = !cloneRegions[i];\n                        setScroll(0);\n                        setRegions(cloneRegions);\n                      }}\n                    >\n                      {a}\n                    </span>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n        {loading === true ? (\n          <div className=\"loading\">로딩 중...</div>\n        ) : !stock ? (\n          <div className=\"no-stock\">차량 없음</div>\n        ) : (\n          <>\n            {\n              // render 차량 Card 컴포넌트\n              cars.map((a, i) => {\n                return (\n                  <Card\n                    className=\"card\"\n                    viewMany={viewMany}\n                    setScroll={setScroll}\n                    setCarInfo={setCarInfo}\n                    setDetail={setDetail}\n                    car={cars[i]}\n                    key={i}\n                  />\n                );\n              })\n            }\n\n            {\n              // 더보기 버튼\n              more ? (\n                <div\n                  className=\"more\"\n                  onClick={() => {\n                    setMorePress(morePress++);\n                    setScroll(window.scrollY + 100);\n                    let newCars = [...cars];\n                    newCars.push();\n                  }}\n                >\n                  더보기\n                </div>\n              ) : null\n            }\n\n            {\n              // 상세정보 모달창\n              detail ? <Detail setDetail={setDetail} carInfo={carInfo} /> : null\n            }\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default CarList;\n"]},"metadata":{},"sourceType":"module"}